# ref 
- https://ttend.tistory.com/61
- https://treeroad.tistory.com/entry/ROM-BIOS-%EB%9E%80

# 리눅스가 부팅될 때의 프로세스 정리

## 리눅스 부팅 과정 

1. power on

2. ROM BIOS에서 지정된 부트 드라이브로 부팅 시작

- ROM 이란?
일단 ROM(=Read Only Memory) 이란 말 그대로 읽기 전용 메모리이다. 메모리를 생각하면 보통 읽기와 쓰기가 전부 가능한 것으로 인식되어 진다. 하지만 ROM은 주로 저장된 메모리를 읽을 수만 있고 새로운 정보를 기억시킬 수 없는 메모리를 말한다.

우리 주변에 ROM이 들어간 예를 보면 쉽게 이해가 간다. 흔히 사용하는 CD를 CD-ROM에 넣고 실행한다. CD-ROM을 실행시키면 그 안에 있는 내용들을 읽기만하지 수정, 편집을 할 수 없다. 그래서 CD-ROM 이라 불린다는 점.  주로 ROM에는 윈도우 같은 운영체제를 가동하기 전에 컴퓨터의 각 구성요소를 점검하기 위한 기본 정보들이 들어있고, 모니터 키보드, 디스크 드라이브 등이 서로 어떻게 정보를 전달하고, 이용할 것인지를 제어하는 기본 입출력시스템. 즉, BIOS 정보가 들어있다. 이런 것들은 아예 컴퓨터가 만들어질 때 제조회사에서 미리 결정하여 입력하는 정보이므로 사용자가 임의로 바꾸는 일은 없는 셈이라고 한다.

- RAM 이란?

RAM(=Random Access Memory) 란 어느 위치에 저장된 데이터든지 접근 하는데 동일한 시간이 걸리는 메모리이다. 어디서든 동일한 시간이 걸리기 때문에 '랜덤(Random, 무작위)'이라는 명칭이 주어졌다고 한다. 참고로 하드 디스크, 플로프 디스크 등의 자기 디스크나 자기 테이프는 저장된 위치에 따라 접근하는 데 걸리는 시간이 다르다.

일반적으로 C언어는 데이터를 메모리에 올린다, 저장한다 라는 말들이 나오는데 여기서 말하는 메모리가 바로 램, 즉 '메인 메모리(Main Memory, 주기억장치)'를 의미한다. 이 메인 메모리는 전기적인 신호로 데이터를 저장하기 때문에 속도가 빠르다. 이 빠른 것이 장점이기 때문에 컴퓨터의 주기억 장치로 사용되는 것이다.

- BIOS

메모리, 디스크, 모니터와 같은 주변기기 사이의 정보 전송을 관장하는 일종의 프로그램이다. 즉, 컴퓨터의 하드웨어에 가장 근접되어 있는 함수들의 집합이라고 볼 수 있다. BIOS는 ROM에 들어 있기 때문에 흔히 ROM BIOS라고 부른다. 

컴퓨터 부팅신 ```<DEL>, <F1>, <F2>``` 등 키를 누르면 나오는 CMOS 셋업 프로그램과 주변기기 초기화, 자체 진단 루틴도 이 ROM-BIOS에 같이 포함되어있다. ROM에는 쓰기가 불가능 하므로 주변기기에 대한 정보를 저장하려면 쓰기를 할 수 있는 다른 공간이 필요하다. 정보를 저장할 수 있는 다른 공간이 바로 CMOS라는 것인데, CMOS 셋업은 BIOS에 포함되어 있는 프로그램으로 주변기기에 대한 정보를 저장하고 전원이 끊어져도 정보가 사라지지 않은 비휘발성 특성을 가지고 있다. 그리고 CMOS 셋업 프로그램을 이용해서 장착된 주변기기에 대한 정보를 알려주면 BIOS는 그것에 기초하여 하드웨어를 인식하고 제어할 수 있게 되는 것이다.

3. 부트 섹터 로드

- 부트로더가 나올때까지 과정

시스템 전원이 시작되면 시스템에 이상이 있는지 체크하고 이상이 없는 경우 BIOS에서 지정한 부팅 순서에 따라 해당 드라이브로 부팅이 이루어 진다.

해당 드라이브의 첫번재 섹터인 부트 섹터를 읽어들이는데 이른 마스터 부트 레코드(Master Boot Record)라고 부른다.

리눅스의 경우 GRUM가 MBR에 저장되어 있다. 이전에는 부트로더로 lilo가 기본적으로 사용되었지만 지금은 GRUB을 디폴트로 사용하고 있다.

4. GRUB 작동

5. 커널 이미지 적재

부트로더에서 리눅스가 선택되면 커널 이미지(/boot/vmlinuz-버전)가 작동한다.

커널 이미지는 압출되어 있는 상태이므로 swapper라는 프로그램에 의해 압축이 풀어지고, 메모리, 디스크 등 여러 하드웨어들을 체크하여 이에 대한 정보를 화면에 보여준다.

화면으로 출력되는 하드웨어 정보를 부팅 후 다시 보고 싶다면 로그인 후 다음의 명령어를 이용한다.

```
$ dmesg | more
$ cat /var/log/dmesg
```

6. 파일 시스템 마운트



7. 시스템 초기화 프로그램(init) 작동

8. 로그인
