
# pod 우선순위(priority)와 선점(preemption)

FEATURE STATE: Kubernetes v1.14 [stable]

파드는 우선순위를 가질 수 있다. 우선순위는 다른 파드에 대한 상대적인 파드의 중요성을 나타낸다. 파드를 스케줄링할 수 없는 경우, 스케줄러는 우선순위가 낮은 파드를 선점(축출)하여 보류중인 파드를 스케줄링할 수 있게 한다.

## 우선순위와 선점을 사용하는 방법 

우선순위와 선점을 사용하려면 다음을 참고한다.

1. 하나 이상의 `priorityclass`를 추가한다.

2. 추가된 `pirityclass` 중 하나에 `priorityClassName`이 설정된 파드를 생성한다. 물론 Pod를 직접 생성할 필요는 없다. 일반적으로 디플로이먼트와 같은 컬렉션 오브젝트의 파드 템플릿에 `priorityClassName`을 추가한다.

## priorityclass

프라이어티클래스는 프라이어리티 클래스 이름에서 우선순위의 정수 값으로 매핑을 정의하는 네임스페이스가 아닌(non-namespaced) 오브젝트이다.  이름은 프라이어리티클래스 오브젝트의 메타데이터의 `name` 필드에 지정된다. 값은 필수 `value` 필드에 지정되어있다. 값이 클수록 우선순위가 높다. 프라이어리티클래스 오브젝트의 이름은 유효한 DNS 서브 도메인 이름잉어야 하며, `system-` 접두사를 붙일 수 없다.

프라이어리티클래스 오브젝트는 10억 이하의 32 비트 정수 값을 가질 수 있다. 일반적으로 선점하거나 축출해서는 안되는 중요한 시스템 파드에는 더 큰 숫자가 예약되어있다. 클러스터 관리자는 원하는 각 매핑에 대해 프라이어리티클래스 오브젝트를 하나씩 생성해야 한다.

프라이어리티클래스에는 `globalDefault`와 `description` 두 개의 선택적인 필드도 있다. `globalDefault` 필드는 이 프라이어리티크랠스의 값을 `priorityClassName`이 없는 파드에 사용해야 함을 나타낸다. 시스템에서 `globalDefault`가 설정된 프라이어리티클래스가 없을 경우, `priorityClassName`이 없는 파드의 우선순위는 0이다.

`description` 필드는 임의의 문자열이다. 이 필드는 이 프라이어티클래스를 언제 사용해야하는지를 클러스터 사용자에게 알려주기 위한것이다.
